import se from"./j4o_KGvX.js";import{_ as oe}from"./BmluXSWN.js";import{u as ae,_ as ne}from"./DW5T6HiY.js";import{i as K,j as re,k as ie,r as g,f as D,e as le,l as ce,s as Y,m as ue,n as de,p as me,q as pe,v as ge,c as S,a as o,b as W,w as G,T as fe,h as a,t as q,F as Q,x as U,y as ve,z as V,A as X,o as I,B as J,C as _e,d as he,_ as Te}from"./D4ANIz5k.js";import{u as j}from"./Cz3nu93G.js";function ke(p,t){const c=t/p*100;return 2/Math.PI*100*Math.atan(c/50)}function xe(p={}){const{duration:t=2e3,throttle:c=200,hideDelay:H=500,resetDelay:C=400}=p,z=p.estimatedProgress||ke,f=K(),v=g(0),T=g(!1),A=g(!1);let _=!1,L,x,E,N;const M=()=>{A.value=!1,$(0)};function $(r=0){if(!f.isHydrating){if(r>=100)return b();u(),v.value=r<0?0:r,c?x=setTimeout(()=>{T.value=!0,w()},c):(T.value=!0,w())}}function R(){E=setTimeout(()=>{T.value=!1,N=setTimeout(()=>{v.value=0},C)},H)}function b(r={}){v.value=100,_=!0,u(),B(),r.error&&(A.value=!0),r.force?(v.value=0,T.value=!1):R()}function B(){clearTimeout(E),clearTimeout(N)}function u(){clearTimeout(x),cancelAnimationFrame(L)}function w(){_=!1;let r;function d(y){if(_)return;r??(r=y);const F=y-r;v.value=Math.max(0,Math.min(100,z(t,F))),L=requestAnimationFrame(d)}L=requestAnimationFrame(d)}let k=()=>{};{const r=f.hook("page:loading:start",()=>{M()}),d=f.hook("page:loading:end",()=>{b()}),y=f.hook("vue:error",()=>b());k=()=>{y(),r(),d(),u()}}return{_cleanup:k,progress:D(()=>v.value),isLoading:D(()=>T.value),error:D(()=>A.value),start:M,set:$,finish:b,clear:u}}function be(p={}){const t=K(),c=t._loadingIndicator=t._loadingIndicator||xe(p);return re()&&(t._loadingIndicatorDeps=t._loadingIndicatorDeps||0,t._loadingIndicatorDeps++,ie(()=>{t._loadingIndicatorDeps--,t._loadingIndicatorDeps===0&&(c._cleanup(),delete t._loadingIndicator)})),c}const we=["id"],ye={class:"article-top"},Se={class:"main-picture-wrap"},Ie={key:0,class:"init-wrap"},Ce=["src","alt"],Ae=["src","alt"],Le={class:"info-text"},$e=["datetime"],Pe=["src","alt"],De=le({__name:"index",props:{config:{},nextConfig:{}},setup(p){const{id:t,title:c,src:H,stack:C,data:z}=p.config,{nextTitle:f,nextSrc:v}=p.nextConfig,T=ce(),{scrollTrigger:A,lenisRef:_}=Y(T),L=ue(),{downloadPercent:x,isDisabled:E,path:N}=Y(L),{start:M,finish:$}=be(),R=g(!1),b=ae(),B=D(()=>b.value?30:40),u=g(null),w=g(null),k=g(null),r=g(window.innerHeight/2),d=g(null),y=D(()=>[{name:"Nuxt",src:"simple-icons:nuxtdotjs"},{name:"SCSS",src:"simple-icons:sass"},{name:"Chart",src:"simple-icons:chartdotjs"},{name:"Storybook",src:"simple-icons:storybook"},{name:"Express",src:"simple-icons:express"}].map(s=>({...s,isActive:C==null?void 0:C.includes(s.name)}))),F=()=>{w.value&&(r.value=window.innerHeight-w.value.offsetHeight),Z(),ee(),te()},Z=()=>{V.timeline({id:`archive-${t}-picture`,scrollTrigger:{trigger:".article-top",start:"top top",end:"bottom top",scrub:!0}}).fromTo(".article-top .picture",{transform:" scale(1)"},{transform:"translateY(10%) scale(1)"})},ee=()=>{if(!u.value)return;const s=u.value.querySelectorAll(".media"),l=m=>{m.forEach(n=>{n.isIntersecting&&(n.target.classList.add("active"),d.value.unobserve(n.target))})},h={threshold:.5};d.value=new IntersectionObserver(l,h),s.forEach(m=>d.value.observe(m))},te=()=>{if(!u.value)return;M();const s=u.value.querySelectorAll("img"),l=s.length;if(l===0){x.value=100,$();return}let h=0;const m=Array.from(s).map(n=>new Promise(e=>{const i=()=>{h++,x.value=Math.round(h/l*100),e()};n.complete?i():(n.addEventListener("load",i,{once:!0}),n.addEventListener("error",i,{once:!0}))}));Promise.all(m).then(()=>{var n,e,i;(n=_.value)==null||n.resize(),(e=_.value)==null||e.scrollTo(0,{immediate:!0}),(i=A.value)==null||i.refresh(),$(),setTimeout(()=>{var P;(P=_.value)==null||P.start()},1e3)})},O=()=>{var m,n;if(!k.value)return;E.value=!0;const s=V.timeline({id:`archive-${t}`,onComplete:()=>{var i,P;(i=s.scrollTrigger)==null||i.kill(),s.kill(),(P=V.getById(`archives-${t}`))==null||P.kill();const e=f.toLowerCase();N.value=`/archives/${e}`}}),l=(m=k.value)==null?void 0:m.querySelector(".bottom-picture-wrap"),h=(n=k.value)==null?void 0:n.querySelector("h3");s.to(l,{translateY:`${window.innerHeight*-.5}px`,height:`${window.innerHeight}px`},0),s.to(h,{opacity:0},0)};return de(x,s=>{s===100&&(R.value=!0)},{immediate:!0}),me(async()=>{_.value.stop(),setTimeout(()=>{window.scrollTo(0,0)},50),await pe(F)}),ge(()=>{d.value&&d.value.disconnect()}),(s,l)=>{const h=se,m=oe,n=ne;return I(),S("div",{ref_key:"blurWrapRef",ref:u,class:"detail-wrap",style:ve({"--pictureWrapHeight":`${a(r)}px`})},[o("article",{id:`archive-${a(t)}`},[o("div",ye,[o("div",Se,[l[0]||(l[0]=o("div",{class:"picture-bg"},null,-1)),W(fe,{name:"init"},{default:G(()=>[a(R)?X("",!0):(I(),S("div",Ie,[o("img",{src:a(j)(a(H)),alt:a(c)},null,8,Ce)]))]),_:1}),o("img",{class:"picture",src:a(j)(a(H)),alt:a(c)},null,8,Ae)]),o("div",{ref_key:"titleWrapRef",ref:w,class:"title-wrap"},[o("h2",null,q(a(c)),1),o("ul",null,[(I(!0),S(Q,null,U(a(y),(e,i)=>(I(),S("li",{key:`stack-${i}`},[W(h,{name:e.src,size:a(B),class:J(["icon",e.isActive&&"active"])},null,8,["name","size","class"])]))),128))])],512)]),(I(!0),S(Q,null,U(a(z),(e,i)=>(I(),S("div",{key:`info-${i}`,class:"info-wrap"},[o("div",Le,[o("time",{datetime:e.date},q(e.date),9,$e),o("p",null,q(e.desc),1),W(m,{to:e.link,target:"_blank","aria-detail":!!(e!=null&&e.link),class:J([!(e!=null&&e.link)&&"disabled"])},{default:G(()=>l[1]||(l[1]=[he(" View Live ")])),_:2},1032,["to","aria-detail","class"])]),e.content.length?_e(s.$slots,`info-${i}`,{key:0},void 0,!0):X("",!0)]))),128))],8,we),o("article",{ref_key:"bottomRef",ref:k,class:"bottom-section"},[W(n,{class:"arrow-button",text:"NEXT",onOnClick:O}),o("div",{role:"button","data-detail":!0,class:"bottom-picture-wrap",onClick:O},[l[2]||(l[2]=o("div",{class:"picture-bg"},null,-1)),o("img",{class:"picture",src:a(j)(a(v)),alt:a(f)},null,8,Pe),o("h3",null,q(a(f)),1)])],512)],4)}}}),We=Te(De,[["__scopeId","data-v-fd91f47e"]]);export{We as _};
